<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Black Box Game</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="difficulty-screen" id="difficulty-screen">
    <h2>Select Difficulty</h2>
    <button onclick="startGame(3)">Easy (3 Atoms)</button>
    <button onclick="startGame(4)">Medium (4 Atoms)</button>
    <button onclick="startGame(5)">Hard (5 Atoms)</button>
  </div>

  <div class="container" id="game-container" style="display: none;">
    <div class="game-area">
      <div class="header">
        <h1>Black Box</h1>
        <button id="how-to-play-btn">How to Play</button>
      </div>
      <p>Click a border number (1–32) to fire a ray</p>
      <div id="board" class="board"></div>

      <p id="guess-count">Guesses: 0</p>

      <div class="controls">
        <button id="reveal">Reveal Atoms</button>
        <button onclick="location.reload()">Restart Game</button>
      </div>
    </div>

    <div id="log" class="log-panel">
      <h2>Game Log</h2>
    </div>
  </div>

  <div id="rules-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>How to Play</h2>
      <div class="carousel">

        <div class="slide">
          <h3>1. Absorption (Hit)</h3>
          <p>Rays that strike an atom directly are <strong>Absorbed</strong>.</p>
          <div class="visual-grid">
            <svg class="ray-svg" viewBox="0 0 185 185">
                <defs><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#e74c3c"></path></marker></defs>
                <line x1="73.5" y1="0" x2="73.5" y2="50" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrow)"></line>
            </svg>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border entry"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"><div class="visual-atom"></div></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
          </div>
        </div>

        <div class="slide">
          <h3>2. Deflection</h3>
          <p>A ray passing a diagonally adjacent atom is <strong>deflected 90°</strong>.</p>
          <div class="visual-grid">
            <svg class="ray-svg" viewBox="0 0 185 185">
                <polyline points="73.5,0 73.5,55 168,55" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrow)"></polyline>
            </svg>
             <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border entry"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
            <div class="visual-border"></div><div class="visual-cell"><div class="visual-atom"></div></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border exit"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
          </div>
        </div>
        
        <div class="slide">
          <h3>3. Reflection</h3>
          <p>Rays aimed between two adjacent atoms are <strong>Reflected</strong>.</p>
           <div class="visual-grid">
            <svg class="ray-svg" viewBox="0 0 185 185">
                <line x1="77.5" y1="0" x2="77.5" y2="62" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrow)"></line>
                <line x1="72.5" y1="62" x2="72.5" y2="0" stroke="#c0392b" stroke-width="3" marker-end="url(#arrow)"></line>
            </svg>
             <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border entry exit"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"><div class="visual-atom"></div></div><div class="visual-cell"><div class="visual-atom"></div></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
          </div>
        </div>

        <div class="slide">
          <h3>4. Reflection</h3>
          <p>Rays entering next to an atom on the edge are <strong>Reflected</strong>.</p>
          <div class="visual-grid">
            <svg class="ray-svg" viewBox="0 0 185 185">
                <line x1="124" y1="46.5" x2="98" y2="46.5" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrow)"></line>
                <line x1="98" y1="51.5" x2="124" y2="51.5" stroke="#c0392b" stroke-width="3" marker-end="url(#arrow)"></line>
            </svg>
             <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"><div class="visual-atom"></div></div><div class="visual-cell"></div><div class="visual-border entry exit"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
          </div>
        </div>

        <div class="slide">
          <h3>5. Straight Path</h3>
          <p>Unaffected rays travel in a <strong>straight line</strong>.</p>
           <div class="visual-grid">
            <svg class="ray-svg" viewBox="0 0 185 185">
                <line x1="73.5" y1="0" x2="73.5" y2="150" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrow)"></line>
            </svg>
             <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border entry"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-border"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-cell"></div><div class="visual-border"></div>
            <div class="visual-corner"></div><div class="visual-border"></div><div class="visual-border exit"></div><div class="visual-border"></div><div class="visual-border"></div><div class="visual-corner"></div>
          </div>
        </div>

      </div>
      <div class="carousel-nav">
        <button id="prev-btn">&lt; Prev</button>
        <button id="next-btn">Next &gt;</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
